<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Manager — Client-side Web App</title>
  <meta name="description" content="Simple single-page task manager using HTML, CSS and vanilla JavaScript with localStorage persistence." />
  <style>
    :root{--bg:#f6f8fb;--card:#ffffff;--muted:#6b7280;--accent:#2563eb;--danger:#ef4444;--success:#10b981}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial; background:var(--bg); color:#0f1724; padding:20px}
    .container{max-width:900px;margin:0 auto}
    header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
    .logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
    form{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    input[type="text"], textarea{flex:1;padding:10px;border:1px solid #e6edf3;border-radius:8px;font-size:14px}
    textarea{min-height:64px;resize:vertical}
    button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:white;cursor:pointer}
    button.secondary{background:#f3f4f6;color:#111827}

    .toolbar{display:flex;gap:8px;align-items:center;margin-bottom:12px}
    .counts{margin-left:auto;color:var(--muted);font-size:13px}

    .lists{display:grid;grid-template-columns:1fr 320px;gap:12px}
    @media(max-width:820px){.lists{grid-template-columns:1fr}}
    .panel{background:var(--card);padding:12px;border-radius:10px}
    .panel h2{margin:0 0 8px 0;font-size:15px}

    ul.tasks{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
    li.task{display:flex;align-items:flex-start;gap:8px;padding:10px;border-radius:8px;border:1px solid #eef2f7}
    .meta{flex:1}
    .title{font-weight:600;font-size:14px;margin:0}
    .desc{margin:4px 0;color:var(--muted);font-size:13px}
    .actions{display:flex;gap:6px}
    .chip{padding:6px 8px;border-radius:999px;background:#f8fafc;border:1px solid #eef2f7;font-size:12px}

    .completed .title{text-decoration:line-through;color:var(--muted)}
    .empty{color:var(--muted);font-size:14px;padding:12px;text-align:center}

    footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">TM</div>
      <div>
        <h1>Task Manager</h1>
        <p class="lead">Add, complete, delete tasks. Data saved in your browser.</p>
      </div>
    </header>

    <main class="card" role="main">
      <form id="taskForm" aria-label="Add task form">
        <input id="title" type="text" placeholder="Task title (required)" required aria-required="true" />
        <textarea id="desc" placeholder="Optional description"></textarea>
        <button type="submit">Add</button>
        <button type="button" id="clearAll" class="secondary">Clear all</button>
      </form>

      <div class="toolbar">
        <div class="chip" id="filterChip">Showing: All</div>
        <div class="counts" id="counts">0 active • 0 completed</div>
      </div>

      <div class="lists">
        <section class="panel" aria-labelledby="activeHeading">
          <h2 id="activeHeading">Active Tasks</h2>
          <ul id="activeList" class="tasks" aria-live="polite"></ul>
          <div id="activeEmpty" class="empty">No active tasks — add one above.</div>
        </section>

        <aside class="panel" aria-labelledby="completedHeading">
          <h2 id="completedHeading">Completed Tasks</h2>
          <ul id="completedList" class="tasks" aria-live="polite"></ul>
          <div id="completedEmpty" class="empty">No completed tasks yet.</div>
        </aside>
      </div>

    </main>

    <footer>
      Lightweight SPA — ideal for demos, Agile labs, and static deployment.
    </footer>
  </div>

  <script>
    // Simple client-side task manager using localStorage
    const STORAGE_KEY = 'task_manager.tasks.v1';

    // Elements
    const taskForm = document.getElementById('taskForm');
    const titleEl = document.getElementById('title');
    const descEl = document.getElementById('desc');
    const activeList = document.getElementById('activeList');
    const completedList = document.getElementById('completedList');
    const activeEmpty = document.getElementById('activeEmpty');
    const completedEmpty = document.getElementById('completedEmpty');
    const countsEl = document.getElementById('counts');
    const clearAllBtn = document.getElementById('clearAll');

    // In-memory tasks array
    // each task: { id, title, description, completed, createdAt }
    let tasks = [];

    // Load from localStorage
    function load() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        tasks = raw ? JSON.parse(raw) : [];
      } catch (e) { tasks = []; console.warn('Failed to load tasks', e); }
    }

    // Save to localStorage
    function save() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
    }

    // Helpers
    function uid() { return Date.now().toString(36) + Math.random().toString(36).slice(2,6); }

    function createTask(title, description){
      return { id: uid(), title: title.trim(), description: description.trim(), completed:false, createdAt: new Date().toISOString() };
    }

    // Render lists
    function render(){
      // clear
      activeList.innerHTML = '';
      completedList.innerHTML = '';

      const active = tasks.filter(t => !t.completed).sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
      const completed = tasks.filter(t => t.completed).sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));

      if(active.length === 0) { activeEmpty.style.display = 'block'; } else { activeEmpty.style.display = 'none'; }
      if(completed.length === 0) { completedEmpty.style.display = 'block'; } else { completedEmpty.style.display = 'none'; }

      active.forEach(t => activeList.appendChild(renderTask(t)));
      completed.forEach(t => completedList.appendChild(renderTask(t)));

      countsEl.textContent = `${active.length} active • ${completed.length} completed`;
    }

    function renderTask(task){
      const li = document.createElement('li');
      li.className = 'task' + (task.completed ? ' completed' : '');

      const meta = document.createElement('div');
      meta.className = 'meta';

      const h = document.createElement('p');
      h.className = 'title';
      h.textContent = task.title;

      const d = document.createElement('p');
      d.className = 'desc';
      d.textContent = task.description;
      if(!task.description) d.style.display = 'none';

      meta.appendChild(h);
      meta.appendChild(d);

      const actions = document.createElement('div');
      actions.className = 'actions';

      const toggle = document.createElement('button');
      toggle.type = 'button';
      toggle.title = task.completed ? 'Mark as active' : 'Mark as complete';
      toggle.textContent = task.completed ? 'Undo' : 'Done';
      toggle.addEventListener('click', ()=>{ toggleComplete(task.id); });

      const del = document.createElement('button');
      del.type = 'button';
      del.title = 'Delete task';
      del.textContent = 'Delete';
      del.style.background = 'transparent';
      del.style.color = 'var(--danger)';
      del.addEventListener('click', ()=>{ deleteTask(task.id); });

      actions.appendChild(toggle);
      actions.appendChild(del);

      li.appendChild(meta);
      li.appendChild(actions);

      return li;
    }

    // Operations
    function addTask(title, desc){
      if(!title || !title.trim()) return; // ignore empty
      const t = createTask(title, desc || '');
      tasks.push(t);
      save();
      render();
    }

    function toggleComplete(id){
      const t = tasks.find(x => x.id === id); if(!t) return;
      t.completed = !t.completed;
      save(); render();
    }

    function deleteTask(id){
      tasks = tasks.filter(x => x.id !== id);
      save(); render();
    }

    function clearAll(){
      if(!confirm('Clear ALL tasks? This cannot be undone.')) return;
      tasks = [];
      save(); render();
    }

    // Events
    taskForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      addTask(titleEl.value, descEl.value);
      taskForm.reset();
      titleEl.focus();
    });

    clearAllBtn.addEventListener('click', clearAll);

    // Init
    (function init(){
      load(); render();
      // small accessibility: focus input
      titleEl.focus();
    })();

    // Expose for debugging
    window._taskManager = { load, save, render, tasks };
  </script>
</body>
</html>
